import{d as tt,c as et,p as at,i as A,x as rt,r as st,q as ot,a as i,o as m,b as k,w as _,e,t as b,u as s,g as dt,y as lt,k as l,h as x,m as n,F as w,f as J,v as K,S as nt,j as it}from"./app-HLyIlBqu.js";import{L as f,m as mt,a as gt,b as ut,l as h}from"./marker-shadow-D3BB1TUe.js";import{u as pt}from"./useSweetAlert-Cof9YfZk.js";import{_ as yt}from"./AppLayout.vue_vue_type_script_setup_true_lang-BeIpLIuC.js";import{I as bt}from"./image-DGHX-cGS.js";import"./index-BGLEAfQV.js";import"./useForwardExpose-DRWg6QZC.js";import"./RovingFocusGroup-ByBvgA08.js";import"./createLucideIcon-droYIutM.js";import"./x-ClyyM8cl.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BqwKsDsO.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C-s8SZou.js";import"./user-CA1pWZne.js";import"./qr-code-LP4jo4Sd.js";import"./scan-line-BbZT_eFM.js";import"./calendar-days-CE4VWhOg.js";import"./ticket-ClP96M6c.js";const ct={class:"py-12"},kt={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},xt={class:"overflow-hidden bg-white p-6 shadow-sm sm:rounded-lg dark:bg-gray-800"},ft={class:"mt-6 grid grid-cols-1 gap-6 sm:grid-cols-6"},vt={class:"sm:col-span-4"},_t={key:0,class:"mt-2 text-sm text-red-500"},wt={class:"sm:col-span-2"},ht=["value"],Ut={key:0,class:"mt-2 text-sm text-red-500"},Vt={class:"sm:col-span-6"},Lt={class:"sm:col-span-6"},Et={class:"sm:col-span-6"},St={class:"mt-2 flex items-center gap-4"},Tt=["src"],Mt={key:1,class:"flex h-24 w-24 items-center justify-center rounded-md bg-gray-100 dark:bg-gray-700"},Ct={key:0,class:"mt-2 text-sm text-red-500"},Pt={class:"overflow-hidden bg-white p-6 shadow-sm sm:rounded-lg dark:bg-gray-800"},Rt={class:"mt-6 grid grid-cols-1 gap-6 sm:grid-cols-6"},qt={class:"sm:col-span-3"},Bt={class:"sm:col-span-3"},Nt={class:"sm:col-span-3"},$t={class:"sm:col-span-3"},jt={class:"sm:col-span-3"},It={class:"sm:col-span-3"},Dt={class:"overflow-hidden bg-white p-6 shadow-sm sm:rounded-lg dark:bg-gray-800"},At={class:"mt-6 grid grid-cols-1 gap-6 sm:grid-cols-6"},Jt={class:"sm:col-span-3"},Kt={class:"sm:col-span-3"},Ot={class:"sm:col-span-3"},zt={class:"sm:col-span-3"},Ht={class:"overflow-hidden bg-white p-6 shadow-sm sm:rounded-lg dark:bg-gray-800"},Wt={class:"mt-6 space-y-4"},Ft={key:0,class:"text-center text-sm text-gray-500"},Gt={class:"grid grid-cols-1 gap-4 sm:grid-cols-12"},Yt={class:"sm:col-span-5"},Zt=["for"],Qt=["onUpdate:modelValue","id"],Xt={class:"sm:col-span-3"},te=["for"],ee=["onUpdate:modelValue","id"],ae={class:"sm:col-span-3"},re=["for"],se=["onUpdate:modelValue","id"],oe={class:"flex items-end sm:col-span-1"},de=["onClick"],le={class:"flex justify-end gap-4 pt-8"},ne=["disabled"],Le=tt({__name:"CreateEdit",props:{event:{},categories:{}},setup(O){var V,L,E,S,T,M,C,P,R,q,B,N,$,j,I,D;f.Icon.Default.mergeOptions({iconUrl:ut,iconRetinaUrl:gt,shadowUrl:mt});const o=O,c=et(()=>!!o.event),{success:z,error:U}=pt(),H=at();A(()=>H.props,d=>{var t,a;(t=d.flash)!=null&&t.success&&z(d.flash.success),(a=d.flash)!=null&&a.error&&U(d.flash.error)},{deep:!0});const r=rt({_method:c.value?"PUT":"POST",name:((V=o.event)==null?void 0:V.name)??"",description:((L=o.event)==null?void 0:L.description)??"",about:((E=o.event)==null?void 0:E.about)??"",location_name:((S=o.event)==null?void 0:S.location_name)??"",location_url:((T=o.event)==null?void 0:T.location_url)??"",longitude:((M=o.event)==null?void 0:M.longitude)??null,latitude:((C=o.event)==null?void 0:C.latitude)??null,speaker:((P=o.event)==null?void 0:P.speaker)??"",poster_image:null,max_attendees:((R=o.event)==null?void 0:R.max_attendees)??0,start_date:((q=o.event)==null?void 0:q.start_date)??"",end_date:((B=o.event)==null?void 0:B.end_date)??"",category_id:((N=o.event)==null?void 0:N.category_id)??null,type:(($=o.event)==null?void 0:$.type)??"",attendance_mode:((j=o.event)==null?void 0:j.attendance_mode)??"ticketing",rundowns:((I=o.event)==null?void 0:I.rundowns)??[]}),v=st((D=o.event)!=null&&D.poster_image?`/storage/${o.event.poster_image}`:null);function W(d){var a;const t=(a=d.target.files)==null?void 0:a[0];t&&(r.poster_image=t,v.value=URL.createObjectURL(t))}const F=()=>{r.rundowns.push({title:"",start_time:"",end_time:"",description:""})},G=d=>{r.rundowns.splice(d,1)};let p=null,g=null;const Y=new h.LatLng(-7.339665,110.501534),Z=()=>{const d=r.latitude!=null&&r.longitude!=null?new h.LatLng(r.latitude,r.longitude):Y;p=f.map("map-container").setView(d,13),f.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(p),g=f.marker(d,{draggable:!0}).addTo(p),g.on("dragend",t=>{const a=t.target.getLatLng();r.latitude=a.lat,r.longitude=a.lng}),p.on("click",t=>{const a=t.latlng;g==null||g.setLatLng(a),r.latitude=a.lat,r.longitude=a.lng})};A([()=>r.latitude,()=>r.longitude],([d,t])=>{if(d!=null&&t!=null&&g){const a=new h.LatLng(d,t);g.getLatLng().equals(a)||(g.setLatLng(a),p==null||p.panTo(a))}}),ot(()=>{Z()});const Q=()=>{const d=c.value?route("admin.events.update",o.event.id):route("admin.events.store");r.post(d,{onError:()=>{U("Terdapat kesalahan pada input Anda. Silakan periksa kembali.")}})},X=[{title:"Manajemen Event",href:route("admin.events.index")},{title:c.value?"Edit Event":"Tambah Event",href:"#"}];return(d,t)=>(m(),i(w,null,[k(s(dt),null,{default:_(()=>[e("title",null,b(c.value?"Edit Event":"Tambah Event"),1),t[14]||(t[14]=e("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",integrity:"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",crossorigin:""},null,-1))]),_:1,__:[14]}),k(yt,{breadcrumbs:X},{default:_(()=>[e("div",ct,[e("div",kt,[e("form",{onSubmit:lt(Q,["prevent"]),class:"space-y-8"},[e("div",xt,[t[21]||(t[21]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100"},"Detail Event",-1)),e("div",ft,[e("div",vt,[t[15]||(t[15]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Nama Event",-1)),l(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s(r).name=a),type:"text",id:"name",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300",required:""},null,512),[[n,s(r).name]]),s(r).errors.name?(m(),i("p",_t,b(s(r).errors.name),1)):x("",!0)]),e("div",wt,[t[17]||(t[17]=e("label",{for:"category_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Kategori",-1)),l(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>s(r).category_id=a),id:"category_id",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},[t[16]||(t[16]=e("option",{value:null},"Pilih Kategori",-1)),(m(!0),i(w,null,J(d.categories,a=>(m(),i("option",{key:a.id,value:a.id},b(a.name),9,ht))),128))],512),[[K,s(r).category_id]]),s(r).errors.category_id?(m(),i("p",Ut,b(s(r).errors.category_id),1)):x("",!0)]),e("div",Vt,[t[18]||(t[18]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Deskripsi Singkat",-1)),l(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=a=>s(r).description=a),id:"description",rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},null,512),[[n,s(r).description]])]),e("div",Lt,[t[19]||(t[19]=e("label",{for:"about",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Tentang Event (About)",-1)),l(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=a=>s(r).about=a),id:"about",rows:"5",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},null,512),[[n,s(r).about]])]),e("div",Et,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Poster Event",-1)),e("div",St,[v.value?(m(),i("img",{key:0,src:v.value,class:"h-24 w-24 rounded-md object-cover"},null,8,Tt)):(m(),i("div",Mt,[k(s(bt),{class:"h-8 w-8 text-gray-400"})])),e("input",{onChange:W,type:"file",accept:"image/*",class:"p-2 text-sm text-gray-500 file:mr-4 file:rounded-full file:border-0 file:bg-gray-200 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-gray-700 hover:file:bg-gray-300 dark:file:bg-gray-600 dark:file:text-gray-200 dark:hover:file:bg-gray-500"},null,32)]),s(r).errors.poster_image?(m(),i("p",Ct,b(s(r).errors.poster_image),1)):x("",!0)])])]),e("div",Pt,[t[29]||(t[29]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100"},"Detail Pelaksanaan",-1)),e("div",Rt,[e("div",qt,[t[22]||(t[22]=e("label",{for:"start_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Tanggal Mulai",-1)),l(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>s(r).start_date=a),type:"date",id:"start_date",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300",required:""},null,512),[[n,s(r).start_date]])]),e("div",Bt,[t[23]||(t[23]=e("label",{for:"end_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Tanggal Selesai",-1)),l(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>s(r).end_date=a),type:"date",id:"end_date",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300",required:""},null,512),[[n,s(r).end_date]])]),e("div",Nt,[t[24]||(t[24]=e("label",{for:"type",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Tipe Event",-1)),l(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>s(r).type=a),type:"text",id:"type",placeholder:"Contoh: Seminar, Workshop",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300",required:""},null,512),[[n,s(r).type]])]),e("div",$t,[t[25]||(t[25]=e("label",{for:"speaker",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Pembicara",-1)),l(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>s(r).speaker=a),type:"text",id:"speaker",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},null,512),[[n,s(r).speaker]])]),e("div",jt,[t[26]||(t[26]=e("label",{for:"max_attendees",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Kapasitas Maksimal",-1)),l(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>s(r).max_attendees=a),type:"number",id:"max_attendees",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},null,512),[[n,s(r).max_attendees]])]),e("div",It,[t[28]||(t[28]=e("label",{for:"attendance_mode",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Mode Kehadiran",-1)),l(e("select",{"onUpdate:modelValue":t[9]||(t[9]=a=>s(r).attendance_mode=a),id:"attendance_mode",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},t[27]||(t[27]=[e("option",{value:"ticketing"},"Ticketing",-1),e("option",{value:"barcode"},"Barcode",-1)]),512),[[K,s(r).attendance_mode]])])])]),e("div",Dt,[t[35]||(t[35]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100"},"Lokasi Event",-1)),e("div",At,[e("div",Jt,[t[30]||(t[30]=e("label",{for:"location_name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Nama Lokasi",-1)),l(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>s(r).location_name=a),type:"text",id:"location_name",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},null,512),[[n,s(r).location_name]])]),e("div",Kt,[t[31]||(t[31]=e("label",{for:"location_url",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"URL Peta (Google Maps, dll)",-1)),l(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>s(r).location_url=a),type:"url",id:"location_url",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},null,512),[[n,s(r).location_url]])]),t[34]||(t[34]=e("div",{class:"sm:col-span-6"},[e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Pilih Titik di Peta"),e("div",{id:"map-container",class:"z-0 mt-2 h-96 w-full rounded-lg"})],-1)),e("div",Ot,[t[32]||(t[32]=e("label",{for:"latitude",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Latitude",-1)),l(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>s(r).latitude=a),type:"number",step:"any",id:"latitude",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},null,512),[[n,s(r).latitude]])]),e("div",zt,[t[33]||(t[33]=e("label",{for:"longitude",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Longitude",-1)),l(e("input",{"onUpdate:modelValue":t[13]||(t[13]=a=>s(r).longitude=a),type:"number",step:"any",id:"longitude",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},null,512),[[n,s(r).longitude]])])])]),e("div",Ht,[e("div",{class:"flex items-center justify-between"},[t[36]||(t[36]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100"},"Jadwal Acara (Rundown)",-1)),e("button",{onClick:F,type:"button",class:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"}," Tambah Jadwal ")]),e("div",Wt,[s(r).rundowns.length===0?(m(),i("div",Ft,"Belum ada jadwal.")):x("",!0),(m(!0),i(w,null,J(s(r).rundowns,(a,u)=>(m(),i("div",{key:u,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[e("div",Gt,[e("div",Yt,[e("label",{for:`rundown_title_${u}`,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Judul Sesi",8,Zt),l(e("input",{"onUpdate:modelValue":y=>a.title=y,type:"text",id:`rundown_title_${u}`,class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300",required:""},null,8,Qt),[[n,a.title]])]),e("div",Xt,[e("label",{for:`rundown_start_${u}`,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Waktu Mulai",8,te),l(e("input",{"onUpdate:modelValue":y=>a.start_time=y,type:"datetime-local",id:`rundown_start_${u}`,class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300",required:""},null,8,ee),[[n,a.start_time]])]),e("div",ae,[e("label",{for:`rundown_end_${u}`,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Waktu Selesai",8,re),l(e("input",{"onUpdate:modelValue":y=>a.end_time=y,type:"datetime-local",id:`rundown_end_${u}`,class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300",required:""},null,8,se),[[n,a.end_time]])]),e("div",oe,[e("button",{onClick:y=>G(u),type:"button",class:"rounded-md bg-red-600 p-2 text-white shadow-sm hover:bg-red-500"},t[37]||(t[37]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,de)])])]))),128))])]),e("div",le,[k(s(nt),{href:d.route("admin.events.index"),class:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-500 dark:bg-gray-600 dark:text-gray-300"},{default:_(()=>t[38]||(t[38]=[it("Batal")])),_:1,__:[38]},8,["href"]),e("button",{type:"submit",disabled:s(r).processing,class:"inline-flex items-center rounded-md border border-transparent bg-gray-800 px-4 py-2 text-sm font-semibold tracking-widest text-white uppercase transition hover:bg-gray-700 active:bg-gray-900 dark:bg-gray-200 dark:text-gray-800"},b(c.value?"Perbarui Event":"Simpan Event"),9,ne)])],32)])])]),_:1})],64))}});export{Le as default};
