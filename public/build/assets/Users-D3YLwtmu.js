import{d as I,p as G,i as L,r as f,W as B,x as J,q as K,s as Q,c as X,a as o,o as r,b as H,u as c,g as Y,w as P,e,l as k,h as p,k as _,m as Z,F as u,f as y,t as i,S as ee,n as te,T as U,y as se,a7 as V}from"./app-BFRaPBD9.js";import{u as re}from"./useSweetAlert-Cof9YfZk.js";import{_ as ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-Ct4v6ecL.js";import"./index-DjxrEcSY.js";import"./useForwardExpose-Bv9COAdp.js";import"./RovingFocusGroup-DcD2b7aW.js";import"./createLucideIcon-BS_jKuSa.js";import"./x-D71-Q1U2.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C3XhWQsq.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-4Po7mMyM.js";import"./user-Bl3PtIrI.js";import"./qr-code-DHdgqAeL.js";import"./scan-line-CiftobsF.js";import"./calendar-days-B3NJRX4S.js";import"./ticket-Cp4ZWCao.js";const oe={class:"py-12"},le={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},de={class:"overflow-hidden bg-white p-6 shadow-sm sm:rounded-lg dark:bg-gray-800"},ne={class:"mb-6 flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center"},ie={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},ce={class:"w-full text-left text-sm text-gray-500 dark:text-gray-400"},ue={key:0},ge={class:"px-6 py-4"},me={class:"flex items-center gap-4"},xe=["src"],pe={key:1,class:"flex h-10 w-10 items-center justify-center rounded-full bg-gray-200 dark:bg-gray-700"},ye={class:"font-medium text-gray-900 dark:text-white"},he={class:"text-xs text-gray-500 dark:text-gray-400"},be={class:"px-6 py-4"},fe={class:"flex flex-col gap-1"},ve={class:"px-6 py-4"},ke={class:"flex flex-wrap gap-1"},_e={class:"space-x-2 px-6 py-4 text-right"},we=["onClick"],Ce=["onClick"],Me=["onClick"],Te={key:0,class:"mt-6"},je={class:"-mb-1 flex flex-wrap"},Ee=["innerHTML"],Se=["innerHTML"],Le={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Be={class:"relative w-full max-w-lg transform overflow-hidden rounded-lg bg-white p-6 text-left shadow-xl transition-all dark:bg-gray-800"},He={class:"flex items-start gap-4"},Pe=["src"],Ue={key:1,class:"flex h-24 w-24 flex-shrink-0 items-center justify-center rounded-lg bg-gray-200 dark:bg-gray-700"},Ve={class:"flex-1"},$e={class:"text-xl font-bold text-gray-900 dark:text-white"},De={class:"text-sm text-gray-500 dark:text-gray-400"},Re={class:"mt-2 text-sm text-gray-700 dark:text-gray-300"},ze={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ae={class:"relative w-full max-w-2xl transform overflow-hidden rounded-lg bg-white shadow-xl transition-all dark:bg-gray-800"},Ne={class:"bg-white p-6 dark:bg-gray-800"},Oe={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},Fe={class:"flex-1 space-y-6 overflow-y-auto p-6"},We={class:"mt-2 rounded-md border border-gray-200 dark:border-gray-600"},qe={class:"border-b border-gray-200 p-2 dark:border-gray-600"},Ie={class:"flex items-center"},Ge={class:"grid grid-cols-2 gap-2 p-4 sm:grid-cols-3"},Je=["value"],Ke={class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},Qe={key:0,class:"mt-2 text-sm text-red-600"},Xe={class:"flex justify-end gap-4 bg-gray-50 p-6 dark:bg-gray-800"},Ye=["disabled"],xt=I({__name:"Users",props:{users:{},roles:{},filters:{}},setup($){const m=$,{success:D,error:R,confirmDelete:z}=re(),A=G();L(()=>A.props,a=>{var t,x;(t=a.flash)!=null&&t.success&&D(a.flash.success),(x=a.flash)!=null&&x.error&&R(a.flash.error)},{deep:!0});const v=f(m.filters.search);let w;L(v,a=>{clearTimeout(w),w=setTimeout(()=>{B.get(route("admin.users.index"),{search:a},{preserveState:!0,replace:!0})},300)});const n=J({roles:[]}),h=f(!1),b=f(!1),d=f(null),N=a=>{d.value=a,h.value=!0},O=a=>{d.value=a,n.roles=a.roles.map(t=>t.name),b.value=!0},g=()=>{h.value=!1,b.value=!1,d.value=null,n.reset()},C=a=>{a.key==="Escape"&&(h.value||b.value)&&g()};K(()=>document.addEventListener("keydown",C)),Q(()=>document.removeEventListener("keydown",C));const F=()=>{d.value&&n.put(route("admin.users.update",d.value.id),{onSuccess:()=>g()})},W=a=>{z(()=>{B.delete(route("admin.users.destroy",a.id),{preserveScroll:!0})})},M=X({get:()=>m.roles?n.roles.length===m.roles.length:!1,set:a=>{n.roles=a?m.roles.slice():[]}}),q=[{title:"Manajemen Pengguna",href:route("admin.users.index")}];return(a,t)=>(r(),o(u,null,[H(c(Y),{title:"Manajemen Pengguna"}),H(ae,{breadcrumbs:q},{default:P(()=>{var x,T,j,E,S;return[e("div",oe,[e("div",le,[e("div",de,[e("div",ne,[t[3]||(t[3]=e("h2",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"Daftar Pengguna",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),type:"text",placeholder:"Cari pengguna...",class:"block w-full rounded-md border-gray-300 bg-white p-2 text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:w-64 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:focus:border-indigo-600 dark:focus:ring-indigo-600"},null,512),[[Z,v.value]])]),e("div",ie,[e("table",ce,[t[6]||(t[6]=e("thead",{class:"bg-gray-50 text-xs text-gray-700 uppercase dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Pengguna"),e("th",{scope:"col",class:"px-6 py-3"},"Institusi"),e("th",{scope:"col",class:"px-6 py-3"},"Roles"),e("th",{scope:"col",class:"px-6 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",null,[a.users.data.length===0?(r(),o("tr",ue,t[4]||(t[4]=[e("td",{colspan:"4",class:"px-6 py-4 text-center"},"Tidak ada data ditemukan.",-1)]))):p("",!0),(r(!0),o(u,null,y(a.users.data,s=>(r(),o("tr",{key:s.id,class:"border-b bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"},[e("td",ge,[e("div",me,[s.avatar?(r(),o("img",{key:0,src:`/storage/${s.avatar}`,class:"h-10 w-10 rounded-full object-cover"},null,8,xe)):(r(),o("div",pe,t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"text-gray-500"},[e("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1)]))),e("div",null,[e("div",ye,i(s.name),1),e("div",he,i(s.email),1)])])]),e("td",be,[e("div",fe,[(r(!0),o(u,null,y(s.institutions,l=>(r(),o("span",{key:l.name},i(l.name),1))),128))])]),e("td",ve,[e("div",ke,[(r(!0),o(u,null,y(s.roles,l=>(r(),o("span",{key:l.name,class:"rounded bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"},i(l.name),1))),128))])]),e("td",_e,[e("button",{onClick:l=>N(s),class:"font-medium text-green-600 hover:underline dark:text-green-500"}," Lihat ",8,we),e("button",{onClick:l=>O(s),class:"font-medium text-blue-600 hover:underline dark:text-blue-500"}," Edit Role ",8,Ce),e("button",{onClick:l=>W(s),class:"font-medium text-red-600 hover:underline dark:text-red-500"}," Hapus ",8,Me)])]))),128))])])]),a.users.links.length>3?(r(),o("div",Te,[e("div",je,[(r(!0),o(u,null,y(a.users.links,(s,l)=>(r(),o(u,{key:l},[s.url?(r(),k(c(ee),{key:1,class:te(["mr-1 mb-1 rounded border px-4 py-3 text-sm hover:bg-white focus:border-indigo-500 focus:text-indigo-500 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-700",{"bg-white font-bold dark:bg-gray-700":s.active}]),href:s.url},{default:P(()=>[e("span",{innerHTML:s.label},null,8,Se)]),_:2},1032,["class","href"])):(r(),o("div",{key:0,class:"mr-1 mb-1 rounded border px-4 py-3 text-sm text-gray-400",innerHTML:s.label},null,8,Ee))],64))),128))])])):p("",!0)])])]),(r(),k(U,{to:"body"},[h.value?(r(),o("div",Le,[e("div",{onClick:g,class:"absolute inset-0 bg-gray-900/50"}),e("div",Be,[e("div",He,[(x=d.value)!=null&&x.avatar?(r(),o("img",{key:0,src:`/storage/${d.value.avatar}`,class:"h-24 w-24 rounded-lg object-cover"},null,8,Pe)):(r(),o("div",Ue,t[7]||(t[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"text-gray-500"},[e("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1)]))),e("div",Ve,[e("h3",$e,i((T=d.value)==null?void 0:T.name),1),e("p",De,"@"+i((j=d.value)==null?void 0:j.username),1),e("p",Re,i((E=d.value)==null?void 0:E.email),1)])]),e("div",{class:"mt-5 sm:mt-6"},[e("button",{type:"button",onClick:g,class:"inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"}," Tutup ")])])])):p("",!0)])),(r(),k(U,{to:"body"},[b.value?(r(),o("div",ze,[e("div",{onClick:g,class:"absolute inset-0 bg-gray-900/50"}),e("div",Ae,[e("form",{onSubmit:se(F,["prevent"]),class:"flex h-full flex-col"},[e("div",Ne,[e("h2",Oe,"Edit Role untuk: "+i((S=d.value)==null?void 0:S.name),1)]),e("div",Fe,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Roles",-1)),e("div",We,[e("div",qe,[e("label",Ie,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>M.value=s),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,512),[[V,M.value]]),t[8]||(t[8]=e("span",{class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},"Pilih Semua",-1))])]),e("div",Ge,[(r(!0),o(u,null,y(m.roles,s=>(r(),o("label",{key:s,class:"flex items-center"},[_(e("input",{type:"checkbox",value:s,"onUpdate:modelValue":t[2]||(t[2]=l=>c(n).roles=l),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,Je),[[V,c(n).roles]]),e("span",Ke,i(s),1)]))),128))])]),c(n).errors.roles?(r(),o("p",Qe,i(c(n).errors.roles),1)):p("",!0)])]),e("div",Xe,[e("button",{type:"button",onClick:g,class:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-500 dark:bg-gray-600 dark:text-gray-300"}," Batal "),e("button",{type:"submit",disabled:c(n).processing,class:"inline-flex items-center rounded-md border border-transparent bg-gray-800 px-4 py-2 text-xs font-semibold tracking-widest text-white uppercase transition hover:bg-gray-700 active:bg-gray-900 dark:bg-gray-200 dark:text-gray-800"}," Perbarui Role ",8,Ye)])],32)])])):p("",!0)]))]}),_:1})],64))}});export{xt as default};
