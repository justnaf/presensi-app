import{d as f,r as b,c as k,i as _,W as w,a as r,o as s,b as l,u as m,g as E,w as L,e as t,h as c,j as S,k as M,F as u,f as g,t as i,v as j,l as D,S as N,n as T}from"./app-fHVXIUoW.js";import{_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-BEeWnTEb.js";import{F as B}from"./file-spreadsheet-CB5eV8PD.js";import{U as V}from"./users-QqBpLLfk.js";import{U as C}from"./user-u_MekotO.js";import"./index-D4YbJwBx.js";import"./useForwardExpose-Cz9c9bbS.js";import"./RovingFocusGroup-8T0dmSRR.js";import"./createLucideIcon-C5jB7qFA.js";import"./x-B4vF1rHj.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C6BlNLMt.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-HgvbJFm-.js";import"./qr-code-DO0u7aVJ.js";import"./scan-line-QRE1NCFk.js";import"./calendar-days-BFwzS0bx.js";import"./ticket-CsiJWhKL.js";const F={class:"py-12"},H={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},I={class:"overflow-hidden bg-white p-6 shadow-sm sm:rounded-lg dark:bg-gray-800"},K={class:"mb-6 space-y-4"},P={class:"flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center"},A=["href"],R=["value"],W={key:0,class:"mt-8 flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-12 text-center dark:border-gray-600"},$={key:1},z={class:"shadow-md sm:rounded-lg"},q={class:"w-full text-left text-sm text-gray-500 dark:text-gray-400"},G={key:0},J={class:"px-6 py-4"},O={class:"flex items-center gap-3"},Q=["src"],X={key:1,class:"flex h-10 w-10 items-center justify-center rounded-full bg-gray-200 dark:bg-gray-700"},Y={class:"font-medium text-gray-900 dark:text-white"},Z={class:"px-6 py-4"},tt={class:"px-6 py-4 whitespace-nowrap"},et={class:"px-6 py-4 font-mono text-xs"},at={key:0},st={key:1},rt={key:0,class:"mt-6"},nt={class:"-mb-1 flex flex-wrap"},ot=["innerHTML"],Et=f({__name:"Attendance",props:{events:{},attendance:{},filters:{}},setup(p){const o=b(p.filters.event_id||""),y=k(()=>o.value?route("admin.data.attendances.export",{event_id:o.value}):"#");_(o,n=>{w.get(route("admin.data.attendances.index"),{event_id:n},{preserveState:!0,replace:!0})});const x=n=>new Date(n).toLocaleString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),h=n=>{var a,e,d;return((d=(e=(a=n.user)==null?void 0:a.institutions)==null?void 0:e[0])==null?void 0:d.name)??n.origin_institution??"-"},v=[{title:"Manajemen Event",href:"#"},{title:"Riwayat Kehadiran",href:route("admin.data.attendances.index")}];return(n,a)=>(s(),r(u,null,[l(m(E),{title:"Riwayat Kehadiran"}),l(U,{breadcrumbs:v},{default:L(()=>[t("div",F,[t("div",H,[t("div",I,[t("div",K,[t("div",P,[a[2]||(a[2]=t("h2",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"Riwayat Kehadiran Event",-1)),o.value&&n.attendance.data.length>0?(s(),r("a",{key:0,href:y.value,target:"_blank",class:"inline-flex items-center gap-2 rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-green-700"},[l(m(B),{class:"h-4 w-4"}),a[1]||(a[1]=S(" Export Excel "))],8,A)):c("",!0)]),t("div",null,[a[4]||(a[4]=t("label",{for:"event-select",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Pilih Event",-1)),M(t("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),id:"event-select",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm md:w-1/2 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},[a[3]||(a[3]=t("option",{value:""},"-- Silakan Pilih Event --",-1)),(s(!0),r(u,null,g(n.events,e=>(s(),r("option",{key:e.id,value:e.id},i(e.name),9,R))),128))],512),[[j,o.value]])])]),o.value?(s(),r("div",$,[t("div",z,[t("table",q,[a[8]||(a[8]=t("thead",{class:"bg-gray-50 text-xs text-gray-700 uppercase dark:bg-gray-700 dark:text-gray-400"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"},"Nama Peserta"),t("th",{scope:"col",class:"px-6 py-3"},"Asal Instansi"),t("th",{scope:"col",class:"px-6 py-3"},"Waktu Kehadiran"),t("th",{scope:"col",class:"px-6 py-3"},"Lokasi (Lat/Lng)")])],-1)),t("tbody",null,[n.attendance.data.length===0?(s(),r("tr",G,a[7]||(a[7]=[t("td",{colspan:"4",class:"px-6 py-4 text-center"},"Belum ada data kehadiran untuk event ini.",-1)]))):c("",!0),(s(!0),r(u,null,g(n.attendance.data,e=>{var d;return s(),r("tr",{key:e.id,class:"border-b bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"},[t("td",J,[t("div",O,[(d=e.user)!=null&&d.avatar?(s(),r("img",{key:0,src:`/storage/${e.user.avatar}`,class:"h-10 w-10 rounded-full object-cover"},null,8,Q)):(s(),r("div",X,[l(m(C),{class:"h-5 w-5 text-gray-400"})])),t("div",Y,i(e.name),1)])]),t("td",Z,i(h(e)),1),t("td",tt,i(x(e.scanned_at)),1),t("td",et,[e.latitude&&e.longitude?(s(),r("div",at,i(e.latitude)+", "+i(e.longitude),1)):(s(),r("span",st,"-"))])])}),128))])])]),n.attendance.links.length>3?(s(),r("div",rt,[t("div",nt,[(s(!0),r(u,null,g(n.attendance.links,(e,d)=>(s(),r(u,{key:d},[e.url?(s(),D(m(N),{key:1,class:T(["mr-1 mb-1 rounded border px-4 py-3 text-sm hover:bg-white focus:border-indigo-500 focus:text-indigo-500 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-700",{"bg-white font-bold dark:bg-gray-700":e.active}]),href:e.url,innerHTML:e.label},null,8,["class","href","innerHTML"])):(s(),r("div",{key:0,class:"mr-1 mb-1 rounded border px-4 py-3 text-sm text-gray-400 dark:border-gray-700",innerHTML:e.label},null,8,ot))],64))),128))])])):c("",!0)])):(s(),r("div",W,[l(m(V),{class:"h-16 w-16 text-gray-400"}),a[5]||(a[5]=t("h3",{class:"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100"},"Pilih Event untuk Memulai",-1)),a[6]||(a[6]=t("p",{class:"mt-1 text-sm text-gray-500"},"Data kehadiran akan muncul di sini setelah Anda memilih event.",-1))]))])])])]),_:1})],64))}});export{Et as default};
