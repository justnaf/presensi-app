import{d as F,p as I,i as C,r as m,W as M,x as O,q as W,s as G,c as J,a as n,o as a,b as S,u as d,g as K,w as E,e,l as R,h as g,k as f,m as L,F as u,f as h,t as i,S as Q,n as X,T as Y,y as Z,a7 as V,z as B}from"./app-BFRaPBD9.js";import{u as ee}from"./useSweetAlert-Cof9YfZk.js";import{_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-Ct4v6ecL.js";import"./index-DjxrEcSY.js";import"./useForwardExpose-Bv9COAdp.js";import"./RovingFocusGroup-DcD2b7aW.js";import"./createLucideIcon-BS_jKuSa.js";import"./x-D71-Q1U2.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C3XhWQsq.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-4Po7mMyM.js";import"./user-Bl3PtIrI.js";import"./qr-code-DHdgqAeL.js";import"./scan-line-CiftobsF.js";import"./calendar-days-B3NJRX4S.js";import"./ticket-Cp4ZWCao.js";const se={class:"py-12"},re={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},oe={class:"overflow-hidden bg-white p-6 shadow-sm sm:rounded-lg dark:bg-gray-800"},ae={class:"mb-6 flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center"},ne={class:"flex w-full items-center gap-2 sm:w-auto"},de={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},le={class:"w-full text-left text-sm text-gray-500 dark:text-gray-400"},ie={key:0},ue={class:"px-6 py-4 font-medium text-gray-900 dark:text-white"},ce={class:"px-6 py-4"},me={class:"flex flex-wrap gap-1"},ge={class:"space-x-2 px-6 py-4 text-right"},pe=["onClick"],be=["onClick"],xe={key:0,class:"mt-6"},ye={class:"-mb-1 flex flex-wrap"},fe=["innerHTML"],he=["innerHTML"],ke={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ve={class:"relative w-full max-w-2xl transform overflow-hidden rounded-lg bg-white shadow-xl transition-all dark:bg-gray-800"},_e={class:"bg-white p-6 dark:bg-gray-800"},we={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},Te={class:"flex-1 space-y-6 overflow-y-auto p-6"},Ce={key:0,class:"mt-2 text-sm text-red-600"},Me={class:"mt-2 rounded-md border border-gray-200 dark:border-gray-600"},Se={class:"border-b border-gray-200 p-2 dark:border-gray-600"},Ee={class:"flex items-center"},Re={class:"grid grid-cols-2 gap-2 p-4 sm:grid-cols-3"},Le=["value"],Ve={class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},Be={key:0,class:"mt-2 text-sm text-red-600"},Ue={class:"flex justify-end gap-4 bg-gray-50 p-6 dark:bg-gray-800"},je=["disabled"],Qe=F({__name:"Roles",props:{roles:{},permissions:{},filters:{}},setup(U){const p=U,{success:j,error:H,confirmDelete:N}=ee(),P=I();C(()=>P.props,s=>{var t,r;(t=s.flash)!=null&&t.success&&j(s.flash.success),(r=s.flash)!=null&&r.error&&H(s.flash.error)},{deep:!0});const k=m(p.filters.search);let _;C(k,s=>{clearTimeout(_),_=setTimeout(()=>{M.get(route("admin.roles.index"),{search:s},{preserveState:!0,replace:!0})},300)});const o=O({id:null,name:"",permissions:[]}),c=m(!1),b=m(!1),v=m(""),x=m(null),D=()=>{b.value=!1,o.reset(),v.value="Tambah Role Baru",c.value=!0,B(()=>{var s;return(s=x.value)==null?void 0:s.focus()})},z=s=>{b.value=!0,o.id=s.id,o.name=s.name,o.permissions=s.permissions.map(t=>t.name),v.value="Edit Role",c.value=!0,B(()=>{var t;return(t=x.value)==null?void 0:t.focus()})},y=()=>{c.value=!1,o.reset()},w=s=>{s.key==="Escape"&&c.value&&y()};W(()=>document.addEventListener("keydown",w)),G(()=>document.removeEventListener("keydown",w));const A=()=>{const s={onSuccess:()=>y(),onError:()=>{var t;return(t=x.value)==null?void 0:t.focus()}};b.value?o.put(route("admin.roles.update",o.id),s):o.post(route("admin.roles.store"),s)},$=s=>{N(()=>{M.delete(route("admin.roles.destroy",s.id),{preserveScroll:!0})})},T=J({get:()=>p.permissions?o.permissions.length===p.permissions.length:!1,set:s=>{o.permissions=s?p.permissions.slice():[]}}),q=[{title:"Manajemen Roles",href:route("admin.roles.index")}];return(s,t)=>(a(),n(u,null,[S(d(K),{title:"Roles & Permissions"}),S(te,{breadcrumbs:q},{default:E(()=>[e("div",se,[e("div",re,[e("div",oe,[e("div",ae,[t[4]||(t[4]=e("h2",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"Manajemen Roles",-1)),e("div",ne,[f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>k.value=r),type:"text",placeholder:"Cari role...",class:"block w-full rounded-md border-gray-300 bg-white p-2 text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:w-64 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:focus:border-indigo-600 dark:focus:ring-indigo-600"},null,512),[[L,k.value]]),e("button",{onClick:D,type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-gray-800 px-4 py-2 text-xs font-semibold tracking-widest text-white uppercase transition duration-150 ease-in-out hover:bg-gray-700 focus:outline-none active:bg-gray-900 dark:bg-gray-200 dark:text-gray-800 dark:hover:bg-white"}," Tambah Role ")])]),e("div",de,[e("table",le,[t[6]||(t[6]=e("thead",{class:"bg-gray-50 text-xs text-gray-700 uppercase dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Nama Role"),e("th",{scope:"col",class:"px-6 py-3"},"Permissions"),e("th",{scope:"col",class:"px-6 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",null,[s.roles.data.length===0?(a(),n("tr",ie,t[5]||(t[5]=[e("td",{colspan:"3",class:"px-6 py-4 text-center"},"Tidak ada data ditemukan.",-1)]))):g("",!0),(a(!0),n(u,null,h(s.roles.data,r=>(a(),n("tr",{key:r.id,class:"border-b bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"},[e("td",ue,i(r.name),1),e("td",ce,[e("div",me,[(a(!0),n(u,null,h(r.permissions,l=>(a(),n("span",{key:l.name,class:"rounded bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300"},i(l.name),1))),128))])]),e("td",ge,[e("button",{onClick:l=>z(r),class:"font-medium text-blue-600 hover:underline dark:text-blue-500"}," Edit ",8,pe),e("button",{onClick:l=>$(r),class:"font-medium text-red-600 hover:underline dark:text-red-500"}," Hapus ",8,be)])]))),128))])])]),s.roles.links.length>3?(a(),n("div",xe,[e("div",ye,[(a(!0),n(u,null,h(s.roles.links,(r,l)=>(a(),n(u,{key:l},[r.url?(a(),R(d(Q),{key:1,class:X(["mr-1 mb-1 rounded border px-4 py-3 text-sm hover:bg-white focus:border-indigo-500 focus:text-indigo-500 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-700",{"bg-white font-bold dark:bg-gray-700":r.active}]),href:r.url},{default:E(()=>[e("span",{innerHTML:r.label},null,8,he)]),_:2},1032,["class","href"])):(a(),n("div",{key:0,class:"mr-1 mb-1 rounded border px-4 py-3 text-sm text-gray-400",innerHTML:r.label},null,8,fe))],64))),128))])])):g("",!0)])])]),(a(),R(Y,{to:"body"},[c.value?(a(),n("div",ke,[e("div",{onClick:y,class:"absolute inset-0 bg-gray-900/50"}),e("div",ve,[e("form",{onSubmit:Z(A,["prevent"]),class:"flex h-full flex-col"},[e("div",_e,[e("h2",we,i(v.value),1)]),e("div",Te,[e("div",null,[t[7]||(t[7]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Nama Role",-1)),f(e("input",{id:"name",ref_key:"nameInput",ref:x,"onUpdate:modelValue":t[1]||(t[1]=r=>d(o).name=r),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 p-2 text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300",required:""},null,512),[[L,d(o).name]]),d(o).errors.name?(a(),n("p",Ce,i(d(o).errors.name),1)):g("",!0)]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Permissions",-1)),e("div",Me,[e("div",Se,[e("label",Ee,[f(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=r=>T.value=r),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,512),[[V,T.value]]),t[8]||(t[8]=e("span",{class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},"Pilih Semua",-1))])]),e("div",Re,[(a(!0),n(u,null,h(s.permissions,r=>(a(),n("label",{key:r,class:"flex items-center"},[f(e("input",{type:"checkbox",value:r,"onUpdate:modelValue":t[3]||(t[3]=l=>d(o).permissions=l),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,Le),[[V,d(o).permissions]]),e("span",Ve,i(r),1)]))),128))])]),d(o).errors.permissions?(a(),n("p",Be,i(d(o).errors.permissions),1)):g("",!0)])]),e("div",Ue,[e("button",{type:"button",onClick:y,class:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-500 dark:bg-gray-600 dark:text-gray-300"}," Batal "),e("button",{type:"submit",disabled:d(o).processing,class:"inline-flex items-center rounded-md border border-transparent bg-gray-800 px-4 py-2 text-xs font-semibold tracking-widest text-white uppercase transition hover:bg-gray-700 active:bg-gray-900 dark:bg-gray-200 dark:text-gray-800"},i(b.value?"Perbarui":"Simpan"),9,je)])],32)])])):g("",!0)]))]),_:1})],64))}});export{Qe as default};
